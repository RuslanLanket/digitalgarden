---
{"dg-publish":true,"permalink":"/proekt-ii-assitent/baza-dannyh-struktura/variant1-bazy-dannyh/","tags":["бд","бот","бот-продавец","ии","ии-ассистенты","иипроект","bd","чат-боты"]}
---

Таблица TgClients хранения id телеграммов и состояний

| id                               | idTelegramm           | state                                            |
| -------------------------------- | --------------------- | ------------------------------------------------ |
| DataType:bigint<br>Type:identity | DataType:bigint       | DataType:smallint                                |
| id записи для связки запросов    | id телеграмма клиента | 1 диалог (по умолчанию)<br>2 клиент<br>3 воронка |
Таблица TgMessages хранит переписку

| idTgClients                               | message                           | direction                                     | dt                         |
| ----------------------------------------- | --------------------------------- | --------------------------------------------- | -------------------------- |
| DataType:bigint                           | DataType:text                     | DataType:boolean                              | DataType:timestamp         |
| хранит значение поля id таблицы TgClients | Текст сообщения переписки с ботом | 1 сообщение от клиента<br>2 сообщение от бота | Дата со временем сообщения |

> Этот вариант более подходит для будующих задач где я хочу держать всю переписку и транскрибированные разговоры с клиентами. Но вся эта история будет в СРМ, поэтому наверное лишнее тут держать данные по каждому сообщению разбито. Что в свою очередь немного усложняет обработку диалога в текущей задаче что ты сейчас делаешь.

